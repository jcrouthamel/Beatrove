<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="DJ Total Kaos - EDM Bangers Tracklist - Find and filter electronic music tracks by BPM, key, and genre">
  <!-- Content Security Policy with inline support for audio player -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob:; media-src 'self' blob:; font-src 'self'; connect-src 'self';">
  <title>DJ Total Kaos - EDM Bangers</title>
  <link rel="stylesheet" href="assets/style.css" />
  <!-- rest of head -->
</head>
<body id="top">
  <div class="top-right-controls">
    <div class="accent-color-selector">
      <label for="accent-color-select" title="Choose Accent Color">🎨</label>
      <select id="accent-color-select">
        <option value="cyan">Cyan</option>
        <option value="red" selected>Red</option>
        <option value="green">Green</option>
        <option value="orange">Orange</option>
      </select>
    </div>
    <div class="theme-toggle-container">
      <label class="theme-switch" for="theme-toggle" title="Toggle Light/Dark Mode">
        <input type="checkbox" id="theme-toggle">
        <span class="slider"></span>
      </label>
    </div>
  </div>
  <div class="logo-container">
    <img src="beatrove-logo.png" alt="Beatrove" class="logo-image" />
  </div>
  <canvas id="top-audio-visualizer" width="800" height="60"></canvas>
  <div class="header-container">
    <div class="app-controls">
      <div class="top-controls-row">
        <button id="export-tags" class="control-btn">Export Tags</button>
        <button id="import-tags-btn" class="control-btn">Import Tags</button>
        <input type="file" id="import-tags-input" accept="application/json" class="hidden">
        <button id="export-all" class="control-btn">📥 Export All</button>
        <label for="import-all-input" class="control-btn cursor-pointer">📤 Import All</label>
        <input type="file" id="import-all-input" accept="application/json" class="hidden">
        <label for="tracklist-upload" class="control-btn">📁 Upload Tracklist</label>
        <input type="file" id="tracklist-upload" accept=".txt,.csv,.yaml,.yml" class="hidden">
        <input type="file" id="audio-folder-input" webkitdirectory directory multiple class="hidden">
      </div>
      <div class="top-controls-row margin-top-small">
        <button id="duplicates-toggle-btn" class="control-btn">🔍 Duplicate Tracks</button>
        <button id="favorites-toggle-btn" class="control-btn">★ Favorites</button>
        <button id="stats-toggle-btn" class="control-btn">📊 Library Stats</button>
        <button id="cover-art-toggle-btn" class="control-btn">🎨 Cover Art</button>
        <select id="waveform-style-select" class="control-btn waveform-style-dropdown">
          <option value="" disabled selected>Waveform Style</option>
          <option value="default">Default (Cyan)</option>
          <option value="soundcloud">SoundCloud (Orange)</option>
          <option value="spotify">Spotify (Green)</option>
          <option value="audacity">Audacity (Blue Stereo)</option>
          <option value="logic">Logic Pro (Colored)</option>
          <option value="overview">Full Track Overview</option>
        </select>
        <a href="User_Documentation.html" id="help-btn" class="control-btn no-text-decoration" target="_blank">❓ Help</a>
      </div>
    </div>
    <h1 id="editable-title" class="editable-title">DJ Total Kaos - EDM Bangers</h1>
    <div id="stats" class="library-summary-stats"></div>
  </div>
  <div id="search-container">
    <!-- Main Search Section -->
    <div class="search-section-card">
      <div class="filter-card-header">
        <span class="filter-card-icon">🔍</span>
        <h3 class="filter-card-title">Search & Discovery</h3>
      </div>
      <div class="search-content">
        <div class="search-wrapper">
          <input type="text" id="search" placeholder="Search tracks, artists, or any metadata..." />
          <button type="button" id="clear-search" class="clear-search" title="Clear search">×</button>
        </div>
        <div class="fuzzy-search-toggle">
          <label class="fuzzy-toggle-label" for="fuzzy-search-toggle" title="Enable typo-tolerant search">
            <input type="checkbox" id="fuzzy-search-toggle">
            <span class="fuzzy-toggle-text">🔤 Fuzzy Search</span>
          </label>
        </div>
      </div>
    </div>

    <!-- Filter Drawer Toggle -->
    <div class="filter-drawer-toggle">
      <button id="filter-drawer-btn" class="filter-toggle-btn collapsed" title="Toggle Filters">
        <span class="filter-toggle-icon">🎛️</span>
        <span class="filter-toggle-text">Search Filters</span>
        <span class="filter-toggle-arrow">▶</span>
      </button>
    </div>

    <!-- Collapsible Filter Drawer -->
    <div class="filter-drawer collapsed" id="filter-drawer">
      <!-- Filter Cards Container -->
      <div class="filters-container">
      <!-- Core Filters Card -->
      <div class="filter-card core-filters">
        <div class="filter-card-header">
          <span class="filter-card-icon">🎵</span>
          <h3 class="filter-card-title">Core Filters</h3>
        </div>
        <div class="filter-grid">
          <div class="filter-item">
            <label for="bpm-filter">BPM</label>
            <select id="bpm-filter">
              <option value="">All BPMs</option>
            </select>
          </div>

          <div class="filter-item">
            <label for="key-filter">Key</label>
            <select id="key-filter">
              <option value="">All Keys</option>
            </select>
          </div>

          <div class="filter-item">
            <label for="year-search">Year</label>
            <input type="text" id="year-search" placeholder="e.g. 2023 or 2020-2023" />
          </div>

          <div class="filter-item">
            <label for="genre-filter">Genre</label>
            <select id="genre-filter">
              <option value="">All Genres</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Advanced Filters Card -->
      <div class="filter-card advanced-filters">
        <div class="filter-card-header">
          <span class="filter-card-icon">⚡</span>
          <h3 class="filter-card-title">Advanced</h3>
        </div>
        <div class="filter-grid">
          <div class="filter-item">
            <label for="energy-filter">Energy</label>
            <select id="energy-filter">
              <option value="">All Energy Levels</option>
              <option value="1">1 ★☆☆☆☆☆☆☆☆☆</option>
              <option value="2">2 ★★☆☆☆☆☆☆☆☆</option>
              <option value="3">3 ★★★☆☆☆☆☆☆☆</option>
              <option value="4">4 ★★★★☆☆☆☆☆☆</option>
              <option value="5">5 ★★★★★☆☆☆☆☆</option>
              <option value="6">6 ★★★★★★☆☆☆☆</option>
              <option value="7">7 ★★★★★★★☆☆☆</option>
              <option value="8">8 ★★★★★★★★☆☆</option>
              <option value="9">9 ★★★★★★★★★☆</option>
              <option value="10">10 ★★★★★★★★★★</option>
            </select>
          </div>

          <div class="filter-item">
            <label for="tag-dropdown">Tags</label>
            <select id="tag-dropdown">
              <option value="">All Tags</option>
            </select>
          </div>

          <div class="filter-item">
            <label for="label-filter">Label</label>
            <select id="label-filter">
              <option value="">All Labels</option>
            </select>
          </div>

          <div class="filter-item">
            <label for="sort-select">Sort By</label>
            <select id="sort-select">
              <option value="name-asc">Artist (A-Z)</option>
              <option value="name-desc">Artist (Z-A)</option>
              <option value="tracks-desc">Most Tracks</option>
              <option value="tracks-asc">Fewest Tracks</option>
              <option value="bpm-asc">BPM (Low to High)</option>
              <option value="bpm-desc">BPM (High to Low)</option>
              <option value="key-asc">Key (A-Z)</option>
              <option value="key-desc">Key (Z-A)</option>
              <option value="title-asc">Title (A-Z)</option>
              <option value="title-desc">Title (Z-A)</option>
            </select>
          </div>
        </div>
      </div>
    </div>
    </div> <!-- Close filter-drawer -->
  </div>

  <div id="az-bar-container">
    <div id="az-bar">
      <!-- A-Z buttons will be generated by JS for accessibility and flexibility -->
    </div>
  </div>

  <div id="library-stats" class="library-stats hidden">
    <div class="stats-container">
      <h2>📊 Music Library Statistics</h2>
      
      <div class="stats-grid">
        <div class="stat-section">
          <h3>📁 Overview</h3>
          <div class="stat-item">
            <span class="stat-label">Total Tracks:</span>
            <span class="stat-value" id="total-tracks">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Total Artists:</span>
            <span class="stat-value" id="total-artists">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Artist With Most Tracks:</span>
            <span class="stat-value" id="top-artist">-</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Average Song Length:</span>
            <span class="stat-value" id="average-song-length">0:00</span>
          </div>
        </div>

        <div class="stat-section">
          <h3>🎤 Top 20 Artists</h3>
          <div class="chart-container">
            <canvas id="top-artists-chart"></canvas>
          </div>
        </div>

        <div class="stat-section">
          <h3>🎵 Genres</h3>
          <div class="chart-container">
            <canvas id="genre-chart"></canvas>
          </div>
          <div id="genre-stats" class="stat-list"></div>
        </div>

        <div class="stat-section">
          <h3>🎹 Keys</h3>
          <div class="chart-container">
            <canvas id="key-chart"></canvas>
          </div>
          <div id="key-stats" class="stat-list"></div>
        </div>

        <div class="stat-section">
          <h3>🥁 BPM Ranges</h3>
          <div class="chart-container">
            <canvas id="bpm-chart"></canvas>
          </div>
          <div id="bpm-stats" class="stat-list"></div>
        </div>

        <div class="stat-section">
          <h3>⚡ Energy Levels</h3>
          <div class="chart-container">
            <canvas id="energy-chart"></canvas>
          </div>
          <div id="energy-stats" class="stat-list"></div>
        </div>

        <div class="stat-section">
          <h3>📅 Years</h3>
          <div class="chart-container">
            <canvas id="year-chart"></canvas>
          </div>
          <div id="year-stats" class="stat-list"></div>
        </div>

        <div class="stat-section record-labels-section">
          <h3>🏷️ Record Labels</h3>
          <div class="chart-container">
            <canvas id="label-chart"></canvas>
          </div>
          <div id="label-stats" class="stat-list"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="duplicate-tracks" class="duplicate-tracks hidden">
    <div class="duplicate-container">
      <h2>🔍 Duplicate Tracks <button id="close-duplicates" class="close-btn">✕</button></h2>
      <div id="duplicate-content">
        <!-- Duplicate tracks will be populated here -->
      </div>
    </div>
  </div>

  <div class="playlist-controls">
    <div class="filter-label playlist-select-wrapper">
      <span>Playlist</span>
      <select id="playlist-select">
        <option value="">Select Playlist</option>
      </select>
    </div>
    <button id="create-playlist-btn" class="control-btn">📝 New Playlist</button>
    <button id="create-smart-playlist-btn" class="control-btn">🧠 Smart Playlist</button>
    <button id="rename-playlist-btn" class="control-btn" disabled>✏️ Rename</button>
    <button id="delete-playlist-btn" class="control-btn" disabled>🗑️ Delete</button>
    <button id="export-playlist-btn" class="control-btn" disabled>Export Playlists</button>
    <button id="import-playlists-btn" class="control-btn">Import Playlists</button>
    <input type="file" id="import-playlists-input" accept=".json,.csv,application/json,text/csv" class="hidden">
  </div>
  
  <div class="pagination-controls">
    <div class="pagination-info">
      <span id="tracks-showing">Showing 0-0 of 0 tracks</span>
    </div>
    <div class="pagination-buttons">
      <button id="first-page-btn" class="control-btn" disabled>⏮️ First</button>
      <button id="prev-page-btn" class="control-btn" disabled>⬅️ Previous</button>
      <span id="page-info">Page 1 of 1</span>
      <button id="next-page-btn" class="control-btn" disabled>Next ➡️</button>
      <button id="last-page-btn" class="control-btn" disabled>Last ⏭️</button>
    </div>
    <div class="tracks-per-page">
      <label for="tracks-per-page-select">Tracks per page:</label>
      <select id="tracks-per-page-select">
        <option value="50">50</option>
        <option value="100" selected>100</option>
        <option value="250">250</option>
        <option value="500">500</option>
        <option value="all">Show All</option>
      </select>
    </div>
  </div>

  <div id="columns" class="columns">
    <div class="loader"></div>
  </div>

  <!-- Bottom Pagination Controls -->
  <div class="pagination-controls pagination-bottom">
    <div class="pagination-info">
      <span id="tracks-showing-bottom">Showing 0-0 of 0 tracks</span>
    </div>
    <div class="pagination-buttons">
      <button id="first-page-btn-bottom" class="control-btn" disabled>⏮️ First</button>
      <button id="prev-page-btn-bottom" class="control-btn" disabled>⬅️ Previous</button>
      <span id="page-info-bottom">Page 1 of 1</span>
      <button id="next-page-btn-bottom" class="control-btn" disabled>Next ➡️</button>
      <button id="last-page-btn-bottom" class="control-btn" disabled>Last ⏭️</button>
    </div>
    <div class="tracks-per-page">
      <label for="tracks-per-page-select-bottom">Tracks per page:</label>
      <select id="tracks-per-page-select-bottom">
        <option value="50">50</option>
        <option value="100" selected>100</option>
        <option value="250">250</option>
        <option value="500">500</option>
        <option value="all">Show All</option>
      </select>
    </div>
  </div>

  <canvas id="audio-visualizer" width="800" height="60"></canvas>

  <!-- Smart Playlist Creation Modal -->
  <div id="smart-playlist-modal" class="modal hidden">
    <div class="modal-content smart-playlist-content">
      <div class="modal-header">
        <h2>🧠 Create Smart Playlist</h2>
        <button class="modal-close" id="close-smart-playlist-modal">✕</button>
      </div>

      <div class="modal-body">
        <div class="smart-playlist-name">
          <label for="smart-playlist-name-input">Playlist Name:</label>
          <input type="text" id="smart-playlist-name-input" placeholder="e.g., High Energy House, 90s Hip-Hop, Dinner Music">
        </div>

        <div class="smart-playlist-rules">
          <h3>Rules <span class="rule-logic-selector">
            <label>
              <input type="radio" name="rule-logic" value="AND" checked> All rules must match (AND)
            </label>
            <label>
              <input type="radio" name="rule-logic" value="OR"> Any rule can match (OR)
            </label>
          </span></h3>

          <div id="smart-playlist-rules-container">
            <!-- Rules will be added here dynamically -->
          </div>

          <button id="add-rule-btn" class="control-btn">+ Add Rule</button>
        </div>

        <div class="smart-playlist-preview">
          <h3>Preview (<span id="preview-count">0</span> tracks)</h3>
          <div id="smart-playlist-preview-tracks" class="preview-tracks-list">
            <!-- Preview tracks will be shown here -->
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button id="save-smart-playlist-btn" class="control-btn">Create Smart Playlist</button>
        <button id="cancel-smart-playlist-btn" class="control-btn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Stats Section -->
  <div id="stats-section" class="overlay-section" style="display: none;">
    <div class="overlay-content">
      <div class="overlay-header">
        <h2>📊 Library Statistics</h2>
        <button id="close-stats" class="close-btn">✕</button>
      </div>
      <div class="stats-grid">
        <div id="total-stats" class="stats-category">
          <h3>Overview</h3>
          <div class="stats-overview">
            <div class="overview-item">
              <span class="overview-label">Total Tracks</span>
              <span class="overview-value" id="total-tracks-count">0</span>
            </div>
            <div class="overview-item">
              <span class="overview-label">Total Artists</span>
              <span class="overview-value" id="total-artists-count">0</span>
            </div>
            <div class="overview-item">
              <span class="overview-label">Artist With Most Tracks</span>
              <span class="overview-value" id="top-artist-count">-</span>
            </div>
            <div class="overview-item">
              <span class="overview-label">Average Song Length</span>
              <span class="overview-value" id="average-song-length-count">0:00</span>
            </div>
            <div class="overview-item">
              <span class="overview-label">Average BPM</span>
              <span class="overview-value" id="average-bpm">0</span>
            </div>
            <div class="overview-item">
              <span class="overview-label">Total Duration</span>
              <span class="overview-value" id="total-duration">0:00</span>
            </div>
          </div>
        </div>
        <div id="genre-stats" class="stats-category">
          <h3>Genre Distribution</h3>
          <div class="chart-container">
            <canvas id="genre-chart"></canvas>
          </div>
        </div>
        <div id="bpm-stats" class="stats-category">
          <h3>BPM Ranges</h3>
          <div class="chart-container">
            <canvas id="bpm-chart"></canvas>
          </div>
        </div>
        <div id="key-stats" class="stats-category">
          <h3>Key Distribution</h3>
          <div class="chart-container">
            <canvas id="key-chart"></canvas>
          </div>
        </div>
        <div id="energy-stats" class="stats-category">
          <h3>Energy Levels</h3>
          <div class="chart-container">
            <canvas id="energy-chart"></canvas>
          </div>
        </div>
        <div id="year-stats" class="stats-category">
          <h3>Years</h3>
          <div class="chart-container">
            <canvas id="year-chart"></canvas>
          </div>
        </div>
        <div id="label-stats" class="stats-category">
          <h3>Top Record Labels</h3>
          <div class="chart-container">
            <canvas id="labels-chart"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Duplicates Section -->
  <div id="duplicates-section" class="overlay-section" style="display: none;">
    <div class="overlay-content">
      <div class="overlay-header">
        <h2>🔍 Duplicate Tracks</h2>
        <button id="close-duplicates" class="close-btn">✕</button>
      </div>
      <div id="duplicates-list" class="duplicates-container">
        <!-- Duplicate tracks will be rendered here -->
      </div>
    </div>
  </div>

  <footer>
    <div class="footer-content">
      <span id="footer-updated">Updated: never</span>
      <span class="float-right">&copy; 2025 <a href="https://totalkaos.net/" target="_blank" rel="noopener noreferrer" class="footer-link">DJ Total Kaos</a></span>
    </div>
    <div class="footer-border text-center">
      <a href="#top" class="control-btn no-text-decoration">⬆ Back to Top</a>
    </div>
  </footer>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <script type="module" src="assets/js/main.js" defer></script>
</body>
</html>
